!function(n,r){for(var t in r)n[t]=r[t]}(exports,function(n){var r={};function t(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return n[e].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=r,t.d=function(n,r,e){t.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:e})},t.r=function(n){Object.defineProperty(n,"__esModule",{value:!0})},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},t.p="",t(t.s=2)}([function(n,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=function(){function n(){}return n.getLevel=function(n){return n.map(function(n){return n.map(function(n){return n.length}).reduce(function(n,r){return n+r},0)}).reduce(function(n,r){return n+r},0)},n.removeRowDuplicate=function(n){n.forEach(function(n){var r=n.reduce(function(n,r){return 1===r.length&&n.push(r[0]),n},[]);n.forEach(function(n){n.length>1&&r.forEach(function(r){var t=n.indexOf(r);-1!==t&&n.splice(t,1)})})})},n.removeColDuplicate=function(r){var t=function(n){for(var r=[],t=0;t<9;t++){for(var e=[],o=0;o<9;o++)e.push(n[o][t]);r.push(e)}return r}(r);n.removeRowDuplicate(t)},n.removeSquareDuplicate=function(r){var t=function(n){for(var r=[],t=function(t){var e=[],o=Math.floor(t/3),u=t%3;[0,1,2].forEach(function(r){return[0,1,2].forEach(function(t){return e.push(n[o+r][u+t])})}),r.push(e)},e=0;e<9;e++)t(e);return r}(r);n.removeRowDuplicate(t)},n}();r.HumanSolver=e},function(n,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.backtracker=function(n){for(var r=[],t=n.getSolutionStructure(),e=0,o=0,u=n.universe,i=JSON.parse(JSON.stringify(n.universe));;){if(e++,n.maxIteration>0&&e>n.maxIteration)throw new Error("maxIteration reached.");if(-1===o){if("find-all"===n.strategy)break;throw new Error("it seems that the backtracking cannot find a solution.")}var a=n.getPossibilities(u,o);if(0!==a.length){var c=n.pop(a);if(n.setSolution(t,o,c),n.checkSolution(t,o)&&++o===n.length){if("find-first"===n.strategy)break;if("find-all"===n.strategy){var f=JSON.parse(JSON.stringify(t));if(r.push(f),r.length>=n.max)break;o--;continue}}}else n.resetSolution(t,o),n.resetPossibilities(a,o,i),o--}return"find-first"===n.strategy?t:"find-all"===n.strategy?r:void 0}},function(n,r,t){"use strict";var e=this&&this.__assign||Object.assign||function(n){for(var r,t=1,e=arguments.length;t<e;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o]);return n};Object.defineProperty(r,"__esModule",{value:!0});var o=t(1),u=t(0),i=function(){return new Array(9).fill(0).map(function(n,r){return r+1})};function a(n){if(0===n.length)throw new Error("cannot pop from an empty array");var r=Math.floor(Math.random()*n.length),t=n[r];return n.splice(r,1),t}function c(n){return{x:Math.floor(n/9),y:n%9}}function f(n,r,t){return function(n,r,t){return n[r].indexOf(n[r][t])===t}(n,r,t)&&function(n,r,t){return n.map(function(n){return n[t]}).indexOf(n[r][t])===r}(n,r,t)&&function(n,r,t){var e=n[r][t],o=Math.floor(r/3),u=Math.floor(t/3),i=n.slice(3*o,3*o+3).map(function(n){return n.slice(3*u,3*u+3)});return i[r%3][t%3]=0,-1===i.reduce(function(n,r){return n.concat(r)},[]).indexOf(e)}(n,r,t)}var l={getSolutionStructure:function(){return new Array(9).fill(0).map(function(){return new Array(9).fill(0)})},universe:new Array(9).fill(0).map(function(){return new Array(9).fill(0).map(i)}),getPossibilities:function(n,r){var t=c(r),e=t.x,o=t.y;return n[e][o]},resetPossibilities:function(n,r,t){var e=c(r),o=e.x,u=e.y;t[o][u].forEach(function(r){return n.push(r)})},resetSolution:function(n,r){var t=c(r),e=t.x,o=t.y;n[e][o]=0},setSolution:function(n,r,t){var e=c(r),o=e.x,u=e.y;n[o][u]=t},checkSolution:function(n,r){var t=c(r);return f(n,t.x,t.y)},pop:function(n){return a(n)},strategy:"find-first",max:2,length:81},s=function(){function n(){}return n.generate=function(){return l.universe=new Array(9).fill(0).map(function(){return new Array(9).fill(0).map(i)}),o.backtracker(l)},n.naiveCarve=function(r,t){for(var e,o=0;;){e=JSON.parse(JSON.stringify(r));for(var u=new Array(81).fill(0).map(function(n,r){return{r:Math.floor(r/9),c:r%9}}),i=0;i<t;i++){var c=a(u),f=c.r,l=c.c;e[f][l]=0}if(n.checkOneSolution(e))break;o++}return console.log("found in %d iterations",o),e},n.checkOneSolution=function(r){var t=r.map(function(n){return n.map(function(n){return 0===n?new Array(9).fill(0).map(function(n,r){return r+1}):[n]})});n.humanSolve(t),n.humanSolve(t),n.humanSolve(t),n.humanSolve(t);var u=e({},l,{universe:t,strategy:"find-all",max:2,length:81});return 1===o.backtracker(u).length},n.humanSolve=function(n){u.HumanSolver.removeRowDuplicate(n),u.HumanSolver.removeColDuplicate(n),u.HumanSolver.removeSquareDuplicate(n)},n.carve=function(r,t){return n.btcarve(r,t)},n.btcarve=function(r,t){for(var e=function(){try{var e,u={getSolutionStructure:function(){return[]},universe:new Array(t).fill(0).map(function(){return new Array(81).fill(0).map(function(n,r){return{row:Math.floor(r/9),col:r%9}})}),getPossibilities:function(n,r){return n[r]},resetPossibilities:function(n,r,t){t[r].forEach(function(r){return n.push(r)})},resetSolution:function(n,r){n.pop()},setSolution:function(n,r,t){n.length!==r?n.length!==r-1||n.push(t):n[r-1]=t},checkSolution:function(t,o){var u=t[o-1];return t.findIndex(function(n){return n.row===u.row&&n.col===u.col})===o-1&&(e=JSON.parse(JSON.stringify(r)),t.forEach(function(n){e[n.row][n.col]=0}),n.checkOneSolution(e))},pop:function(n){return a(n)},strategy:"find-first",maxIteration:500,length:t};o.backtracker(u);return{value:e}}catch(n){console.log("e",n.message)}};;){var u=e();if("object"==typeof u)return u.value}},n}();r.SudokuSolver=s}]));
//# sourceMappingURL=sudoku-generator.node.js.map