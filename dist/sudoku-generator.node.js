!function(r,n){for(var e in n)r[e]=n[e]}(exports,function(r){var n={};function e(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return r[t].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=r,e.c=n,e.d=function(r,n,t){e.o(r,n)||Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:t})},e.r=function(r){Object.defineProperty(r,"__esModule",{value:!0})},e.n=function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(n,"a",n),n},e.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},e.p="",e(e.s=3)}([function(r,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=function(){function r(){}return r.getLevel=function(r){return r.map(function(r){return r.map(function(r){return r.length}).reduce(function(r,n){return r+n},0)}).reduce(function(r,n){return r+n},0)},r.removeRowDuplicate=function(r){r.forEach(function(r){var n=r.reduce(function(r,n){return 1===n.length&&r.push(n[0]),r},[]);r.forEach(function(r){r.length>1&&n.forEach(function(n){var e=r.indexOf(n);-1!==e&&r.splice(e,1)})})})},r.removeColDuplicate=function(n){var e=function(r){for(var n=[],e=0;e<9;e++){for(var t=[],o=0;o<9;o++)t.push(r[o][e]);n.push(t)}return n}(n);r.removeRowDuplicate(e)},r.removeSquareDuplicate=function(n){var e=function(r){for(var n=[],e=function(e){var t=[],o=Math.floor(e/3),u=e%3;[0,1,2].forEach(function(n){return[0,1,2].forEach(function(e){return t.push(r[o+n][u+e])})}),n.push(t)},t=0;t<9;t++)e(t);return n}(n);r.removeRowDuplicate(e)},r}();n.HumanSolver=t},function(r,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.backtracker=function(r){for(var n=[],e=r.getSolutionStructure(),t=0,o=0,u=r.universe,i=JSON.parse(JSON.stringify(r.universe));;){if(t++,r.maxIteration>0&&t>r.maxIteration)throw new Error("maxIteration reached.");if(-1===o){if("find-all"===r.strategy)break;throw new Error("it seems that the backtracking cannot find a solution.")}var a=r.getPossibilities(u,o);if(0!==a.length){var c=r.pop(a);if(r.setSolution(e,o,c),r.checkSolution(e,o)&&++o===r.length){if("find-first"===r.strategy)break;if("find-all"===r.strategy){var f=JSON.parse(JSON.stringify(e));if(n.push(f),n.length>=r.max)break;o--;continue}}}else r.resetSolution(e,o),r.resetPossibilities(a,o,i),o--}return"find-first"===r.strategy?e:"find-all"===r.strategy?n:void 0}},function(r,n,e){"use strict";var t=this&&this.__assign||Object.assign||function(r){for(var n,e=1,t=arguments.length;e<t;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r};Object.defineProperty(n,"__esModule",{value:!0});var o=e(1),u=e(0),i=function(){return new Array(9).fill(0).map(function(r,n){return n+1})};function a(r){if(0===r.length)throw new Error("cannot pop from an empty array");var n=Math.floor(Math.random()*r.length),e=r[n];return r.splice(n,1),e}function c(r){return{x:Math.floor(r/9),y:r%9}}function f(r,n,e){return function(r,n,e){return r[n].indexOf(r[n][e])===e}(r,n,e)&&function(r,n,e){return r.map(function(r){return r[e]}).indexOf(r[n][e])===n}(r,n,e)&&function(r,n,e){var t=r[n][e],o=Math.floor(n/3),u=Math.floor(e/3),i=r.slice(3*o,3*o+3).map(function(r){return r.slice(3*u,3*u+3)});return i[n%3][e%3]=0,-1===i.reduce(function(r,n){return r.concat(n)},[]).indexOf(t)}(r,n,e)}var l={getSolutionStructure:function(){return new Array(9).fill(0).map(function(){return new Array(9).fill(0)})},universe:new Array(9).fill(0).map(function(){return new Array(9).fill(0).map(i)}),getPossibilities:function(r,n){var e=c(n),t=e.x,o=e.y;return r[t][o]},resetPossibilities:function(r,n,e){var t=c(n),o=t.x,u=t.y;e[o][u].forEach(function(n){return r.push(n)})},resetSolution:function(r,n){var e=c(n),t=e.x,o=e.y;r[t][o]=0},setSolution:function(r,n,e){var t=c(n),o=t.x,u=t.y;r[o][u]=e},checkSolution:function(r,n){var e=c(n);return f(r,e.x,e.y)},pop:function(r){return a(r)},strategy:"find-first",max:2,length:81},s=function(){function r(){}return r.generate=function(){return l.universe=new Array(9).fill(0).map(function(){return new Array(9).fill(0).map(i)}),o.backtracker(l)},r.naiveCarve=function(n,e){for(var t,o=0;;){t=JSON.parse(JSON.stringify(n));for(var u=new Array(81).fill(0).map(function(r,n){return{r:Math.floor(n/9),c:n%9}}),i=0;i<e;i++){var c=a(u),f=c.r,l=c.c;t[f][l]=0}if(r.checkOneSolution(t))break;o++}return console.log("found in %d iterations",o),t},r.checkOneSolution=function(n){var e=n.map(function(r){return r.map(function(r){return 0===r?new Array(9).fill(0).map(function(r,n){return n+1}):[r]})});r.humanSolve(e),r.humanSolve(e),r.humanSolve(e),r.humanSolve(e);var u=t({},l,{universe:e,strategy:"find-all",max:2,length:81});return 1===o.backtracker(u).length},r.humanSolve=function(r){u.HumanSolver.removeRowDuplicate(r),u.HumanSolver.removeColDuplicate(r),u.HumanSolver.removeSquareDuplicate(r)},r.carve=function(n,e){return r.btcarve(n,e)},r.btcarve=function(n,e){for(var t=function(){try{var t,u={getSolutionStructure:function(){return[]},universe:new Array(e).fill(0).map(function(){return new Array(81).fill(0).map(function(r,n){return{row:Math.floor(n/9),col:n%9}})}),getPossibilities:function(r,n){return r[n]},resetPossibilities:function(r,n,e){e[n].forEach(function(n){return r.push(n)})},resetSolution:function(r,n){r.pop()},setSolution:function(r,n,e){r.length!==n?r.length!==n-1||r.push(e):r[n-1]=e},checkSolution:function(e,o){var u=e[o-1];return e.findIndex(function(r){return r.row===u.row&&r.col===u.col})===o-1&&(t=JSON.parse(JSON.stringify(n)),e.forEach(function(r){t[r.row][r.col]=0}),r.checkOneSolution(t))},pop:function(r){return a(r)},strategy:"find-first",maxIteration:500,length:e};o.backtracker(u);return{value:t}}catch(r){console.log("e",r.message)}};;){var u=t();if("object"==typeof u)return u.value}},r}();n.SudokuSolver=s},function(r,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=e(2);n.SudokuSolver=t.SudokuSolver}]));
//# sourceMappingURL=sudoku-generator.node.js.map